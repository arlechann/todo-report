(this["webpackJsonptodo-report"]=this["webpackJsonptodo-report"]||[]).push([[0],{77:function(e,t,n){},84:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(13),i=n.n(c),s=(n(77),n(16)),o=n(135),u=n(132),d=n(24),l=n(35),j=n(9),b=function(e){return function(t){return localStorage.setItem(e,JSON.stringify(t)),t}},m=function(e){return function(t){return Object(j.a)(Object(j.a)({},t),JSON.parse(localStorage.getItem(e)))}},O=function(e){localStorage.removeItem(e)},p=n(2),x={items:{},inProgress:[],done:[],nextId:1},h=Object(r.createContext)(x),f=Object(r.createContext)((function(){})),g=function(){return Object(r.useContext)(h)},v=function(){return Object(r.useContext)(f)},y={progress:0,dueDate:"",isProductive:!1,spentTimeMinutes:0,comment:""},w=function(e,t,n){var r=[e[n],e[t]];return e[t]=r[0],e[n]=r[1],e},P=function(e){return function(t,n){var r=n.id,a=n[e];return Object(j.a)(Object(j.a)({},t),{},{items:Object(j.a)(Object(j.a)({},t.items),{},Object(l.a)({},r,Object(j.a)(Object(j.a)({},t.items[r]),{},Object(l.a)({},e,a))))})}},k=P("progress"),C=P("comment"),T=P("spentTimeMinutes"),N=function(e,t){switch(t.type){case"add":return function(e,t){var n=Object(j.a)(Object(j.a)(Object(j.a)({},y),t.item),{},{id:e.nextId});return Object(j.a)(Object(j.a)({},e),{},{items:Object(j.a)(Object(j.a)({},e.items),{},Object(l.a)({},n.id,n)),inProgress:[].concat(Object(d.a)(e.inProgress),[n.id]),nextId:e.nextId+1})}(e,t.payload);case"up":return function(e,t){var n=t.index;return n-1<0||e.inProgress.length<=n?e:Object(j.a)(Object(j.a)({},e),{},{inProgress:w(Object(d.a)(e.inProgress),n-1,n)})}(e,t.payload);case"down":return function(e,t){var n=t.index;return n<0||e.inProgress.length<=n+1?e:Object(j.a)(Object(j.a)({},e),{},{inProgress:w(Object(d.a)(e.inProgress),n,n+1)})}(e,t.payload);case"done":return function(e,t){var n=t.id;return Object(j.a)(Object(j.a)({},e),{},{inProgress:e.inProgress.filter((function(e){return e!==n})),done:[].concat(Object(d.a)(e.done),[n])})}(e,t.payload);case"update progress":return k(e,t.payload);case"update comment":return C(e,t.payload);case"update spent time":return T(e,t.payload);case"restore":return function(e,t){var n=t.id;return Object(j.a)(Object(j.a)({},e),{},{inProgress:[].concat(Object(d.a)(e.inProgress),[n]),done:e.done.filter((function(e){return e!==n}))})}(e,t.payload);case"all clear":return O(I),x;default:return e}},I="TodoContext",S=function(e){var t,n=Object(r.useReducer)(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){return n.reduce((function(e,t){return t(e)}),e.apply(void 0,arguments))}}(N,b(I)),null!==(t=e.initialState)&&void 0!==t?t:x,m(I)),a=Object(s.a)(n,2),c=a[0],i=a[1];return Object(p.jsx)(h.Provider,{value:c,children:Object(p.jsx)(f.Provider,{value:i,children:e.children})})},D={template:""},B=Object(r.createContext)(D),E=Object(r.createContext)((function(){})),L=function(){return Object(r.useContext)(B)},M=function(e,t){switch(t.type){case"set":return t.payload;case"reset":return O(R),D;default:return e}},R="ConfigContext",U=function(e){var t,n=Object(r.useReducer)(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){return n.reduce((function(e,t){return t(e)}),e.apply(void 0,arguments))}}(M,b(R)),null!==(t=e.initialState)&&void 0!==t?t:D,m(R)),a=Object(s.a)(n,2),c=a[0],i=a[1];return Object(p.jsx)(B.Provider,{value:c,children:Object(p.jsx)(E.Provider,{value:i,children:e.children})})},A=n(117),W=n(119),F=n(121),_=n(43),z=n(134),J=Object(A.a)((function(e){return{title:{display:"inline-block",width:"40%"},tab:{display:"inline-block",width:"80%",marginLeft:"auto"}}})),G=function(e){var t=J();return Object(p.jsx)("div",{children:Object(p.jsx)(W.a,{position:"static",children:Object(p.jsxs)(F.a,{children:[Object(p.jsx)(_.a,{className:t.title,component:"h1",children:"Todo-Report"}),Object(p.jsx)(z.a,{className:t.tab,children:e.children})]})})})},V=n(125),Z=n(122),q=n(123),Y=n(124),H=n(137),K=n(133),Q=n(127),X=n(88),$=n(128),ee=n(129),te=n(130),ne=function(e,t){return("0".repeat(t)+e).slice(-t)},re=function(e){var t=ne(e.getMonth()+1,2),n=ne(e.getDate(),2);return"".concat(t,"/").concat(n)},ae=Object(A.a)((function(e){return{card:{margin:"auto",marginTop:"2rem",marginBottom:"2rem",width:"auto",maxWidth:600,minWidth:480},moveBtn:{marginLeft:"auto"},restoreBtn:{marginLeft:"auto"}}})),ce=function(e){var t=e.item,n=e.dispatch,r=e.disabled,a=ae(),c=0!==t.dueDate.length?t.dueDate.substring(t.dueDate.indexOf("-")+1).replace("-","/"):"\u672a\u8a2d\u5b9a",i=function(e){var t=ne(Math.floor(e/60),2),n=ne(e%60,2);return"".concat(t,":").concat(n)}(t.spentTimeMinutes),o=function(e){if(null==e)return 0;var t=e.split(":").map((function(e){return parseInt(e)})),n=Object(s.a)(t,2);return 60*n[0]+n[1]};return Object(p.jsxs)(Z.a,{className:a.card,elevation:2,children:[Object(p.jsx)(q.a,{title:"#".concat(t.id," ").concat(t.name)}),Object(p.jsxs)(Y.a,{children:[Object(p.jsxs)(V.a,{container:!0,alignItems:"center",children:[Object(p.jsx)(V.a,{item:!0,xs:3,children:Object(p.jsxs)(_.a,{children:["\u671f\u9650 ",c]})}),Object(p.jsxs)(V.a,{item:!0,xs:9,children:[Object(p.jsxs)(_.a,{children:["\u9032\u6357 ",t.progress,"%"]}),Object(p.jsx)(H.a,{value:t.progress,valueLabelDisplay:"auto",step:10,marks:!0,min:0,max:100,onChange:function(e,r){return n({type:"update progress",payload:{id:t.id,progress:r}})},disabled:r})]})]}),Object(p.jsxs)(V.a,{container:!0,spaceing:2,alignItems:"flex-end",children:[Object(p.jsx)(V.a,{item:!0,xs:3,children:Object(p.jsx)(_.a,{color:t.isProductive?"textPrimary":"textSecondary",children:t.isProductive?"\u751f\u7523":"\u975e\u751f\u7523"})}),Object(p.jsx)(V.a,{item:!0,xs:2,children:Object(p.jsx)(K.a,{label:"\u6642\u9593",type:"time",value:i,InputLabelProps:{shrink:!0},inputProps:{step:1800},onChange:function(e){return n({type:"update spent time",payload:{id:t.id,spentTimeMinutes:o(e.target.value)}})},disabled:r})}),Object(p.jsx)(V.a,{item:!0,xs:7,children:Object(p.jsx)(K.a,{label:"\u5099\u8003",type:"text",value:t.comment,InputLabelProps:{shrink:!0},onChange:function(e){return n({type:"update comment",payload:{id:t.id,comment:e.target.value}})},fullWidth:!0})})]})]}),Object(p.jsx)(Q.a,{children:r?Object(p.jsx)(X.a,{className:a.restoreBtn,variant:"outlined",color:"default",size:"small",onClick:function(){return n({type:"restore",payload:{id:t.id}})},children:"\u623b\u3059"}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)($.a,{className:a.moveBtn,variant:"outlined",color:"default",size:"small",children:[Object(p.jsx)(X.a,{onClick:function(){return n({type:"up",payload:{index:t.order}})},children:Object(p.jsx)(ee.a,{})}),Object(p.jsx)(X.a,{onClick:function(){return n({type:"down",payload:{index:t.order}})},children:Object(p.jsx)(te.a,{})})]}),Object(p.jsx)(X.a,{variant:"contained",color:"primary",size:"small",onClick:function(){return n({type:"done",payload:{id:t.id}})},children:"\u5b8c\u4e86"})]})})]})},ie=Object(A.a)((function(e){return{container:{paddingLeft:"2rem",paddingRight:"2rem"}}})),se=function(e){var t=ie(),n=e.disabled?Object(d.a)(e.order).reverse():Object(d.a)(e.order);return Object(p.jsx)(V.a,{container:!0,className:t.container,spacing:3,children:n.map((function(t,n){return Object(p.jsx)(V.a,{item:!0,xs:!0,children:Object(p.jsx)(ce,{item:Object(j.a)(Object(j.a)({},e.items[t]),{},{order:n}),dispatch:e.dispatch,disabled:e.disabled})},t)}))})},oe=n(61),ue=n(131),de=n(136),le=function(e){var t=Object(r.useState)(e),n=Object(s.a)(t,2),a=n[0],c=n[1];return{value:a,checked:a,onChange:function(e){return c("checkbox"===e.target.type?e.target.checked:e.target.value)}}},je=Object(A.a)((function(e){return{paper:{margin:"auto",marginTop:"2rem",marginBottom:"2rem",padding:"1rem",maxWidth:600,verticalAlign:"bottom"},marginZero:{margin:0}}})),be=function(e){var t=v(),n=le(""),r=le(""),a=le(!1),c=je();return Object(p.jsx)(oe.a,{className:c.paper,elevation:2,children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault();var c={name:n.value,dueDate:r.value,isProductive:a.value};t({type:"add",payload:{item:c}})},children:Object(p.jsxs)(V.a,{className:c.gridContainer,spacing:1,container:!0,alignItems:"flex-end",children:[Object(p.jsx)(V.a,{item:!0,xs:12,children:Object(p.jsx)(K.a,Object(j.a)(Object(j.a)({label:"\u30bf\u30b9\u30af",type:"text",InputLabelProps:{shrink:!0}},n),{},{fullWidth:!0,required:!0}))}),Object(p.jsx)(V.a,{item:!0,xs:4,children:Object(p.jsx)(K.a,Object(j.a)({label:"\u671f\u9650",type:"date",InputLabelProps:{shrink:!0}},r))}),Object(p.jsx)(V.a,{item:!0,xs:4,children:Object(p.jsx)(ue.a,{control:Object(p.jsx)(de.a,Object(j.a)({className:c.marginZero,color:"primary"},a)),label:"\u751f\u7523\u7684",labelPlacement:"start"})}),Object(p.jsx)(V.a,{item:!0,xs:2}),Object(p.jsx)(V.a,{item:!0,xs:2,children:Object(p.jsx)(X.a,{type:"submit",variant:"contained",color:"default",children:"\u8ffd\u52a0"})})]})})})},me=function(e){var t=g(),n=v();return Object(p.jsxs)(z.a,{children:[Object(p.jsx)(se,{items:t.items,order:t.inProgress,dispatch:n}),Object(p.jsx)(be,{dispatch:n})]})},Oe=function(e){var t=e.page,n=e.index,r=e.children;return Object(p.jsx)("div",{hidden:t!==n,children:t===n?r:null})},pe=function(e){var t=g(),n=v();return Object(p.jsx)(z.a,{children:Object(p.jsx)(se,{items:t.items,order:t.done,dispatch:n,disabled:!0})})},xe=n(126),he=function(e){var t=Object(r.useState)(e),n=Object(s.a)(t,2),a=n[0],c=n[1];return{value:a,onChange:function(e){return c(e.target.value)}}},fe=Object(A.a)((function(e){return{card:{margin:"auto",marginTop:"2rem",marginBottom:"2rem",width:"auto",maxWidth:600},textarea:{padding:"0.1rem",width:"100%",fontSize:"1rem"},actionBtn:{marginLeft:"auto"},deleteBtn:{display:"block",marginLeft:"auto"},saveBtn:{marginLeft:"0.5rem",marginRight:"0.5rem"},cancelBtn:{marginLeft:"0.5rem",marginRight:"0.5rem"}}})),ge=function(e){var t=L(),n=Object(r.useContext)(E),a=v(),c=fe(),i=he(t.template);return Object(p.jsx)(z.a,{children:Object(p.jsxs)(Z.a,{className:c.card,elevation:2,children:[Object(p.jsx)(q.a,{title:"\u8a2d\u5b9a"}),Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={template:i.value};n({type:"set",payload:t})},children:[Object(p.jsxs)(Y.a,{children:[Object(p.jsxs)(V.a,{container:!0,children:[Object(p.jsx)(V.a,{item:!0,xs:8,children:Object(p.jsx)(_.a,{children:"LocalStorage\u306e\u30c7\u30fc\u30bf\u306e\u524a\u9664"})}),Object(p.jsx)(V.a,{item:!0,xs:4,children:Object(p.jsx)(X.a,{className:c.deleteBtn,variant:"contained",color:"secondary",onClick:function(e){a({type:"all clear"}),n({type:"reset"})},children:"\u524a\u9664"})})]}),Object(p.jsxs)(V.a,{container:!0,direction:"column",children:[Object(p.jsx)(V.a,{container:!0,children:Object(p.jsx)(V.a,{item:!0,xs:8,children:Object(p.jsx)(_.a,{children:"\u30ec\u30dd\u30fc\u30c8\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8"})})}),Object(p.jsx)(V.a,{item:!0,xs:12,children:Object(p.jsx)(xe.a,Object(j.a)({className:c.textarea,minRows:3},i))})]})]}),Object(p.jsx)(Q.a,{children:Object(p.jsxs)(z.a,{className:c.actionBtn,children:[Object(p.jsx)(X.a,{className:c.saveBtn,type:"submit",variant:"contained",color:"primary",children:"\u4fdd\u5b58"}),Object(p.jsx)(X.a,{className:c.cancelBtn,variant:"outlined",color:"secondary",onClick:function(e){},children:"\u30ea\u30bb\u30c3\u30c8"})]})})]})]})})},ve=n(59),ye=[{keyword:"%%",get:function(){return"%"}},{keyword:"%TODAY%",get:function(){return re(new Date)}},{keyword:"%ORDER%",get:function(e){return e.order+1}},{keyword:"%NAME%",get:function(e){var t=e.state,n=e.id;return t.items[n].name}},{keyword:"%DUE_DATE%",get:function(e){var t=e.state,n=e.id;return 0===t.items[n].dueDate.length?"":re(new Date(t.items[n].dueDate))}},{keyword:"%PROGRESS%",get:function(e){var t=e.state,n=e.id;return t.items[n].progress}},{keyword:"%SPENT_TIME%",get:function(e){var t,n=e.state,r=e.id;return t=n.items[r].spentTimeMinutes,Math.floor(t/60)+t%60/60}},{keyword:"%PRODUCTIVE%",get:function(e){var t=e.state,n=e.id;return t.items[n].isProductive?"\u751f\u7523":"\u975e\u751f\u7523"}},{keyword:"%COMMENT%",get:function(e){var t,n=e.state,r=e.id;return null!==(t=n.items[r].comment)&&void 0!==t?t:""}},{keyword:"%PRODUCTIVE_TIME_PERCENT%",get:function(e){var t=e.state,n=t.inProgress.filter((function(e){return t.items[e].isProductive})).reduce((function(e,n){return e+t.items[n].spentTimeMinutes}),0);return Math.floor(100*n/390)}}],we=function e(t){Object(ve.a)(this,e),this.message=t,this.name="TemplateParseError"},Pe=function(e,t,n){if("%"===e[t])return ke(e,t,n);for(var r=t+1;r<e.length;r++)if("%"===e[r])return n.push({type:"text",text:e.substring(t,r)}),ke(e,r,n);return n.push({type:"text",text:e.substring(t)}),n},ke=function(e,t,n){for(var r=t+1;r<e.length;r++)if("%"===e[r])return n.push({type:"keyword",text:e.substring(t,r+1)}),Pe(e,r+1,n);throw new we("Unexpected end of template.")},Ce="%LIST_BEGIN%",Te="%LIST_END%",Ne=function(e,t,n){for(var r=t;r<e.length;r++)if("text"!==e[r].type)switch(e[r].text){case Ce:throw new we("Unexpected keyword ".concat(Ce));case Te:return[n,r];default:n.push(e[r])}else n.push(e[r]);throw new we('Unexpected end of template. "'.concat(Te,'" not found.'))},Ie=function(e){return function(e,t,n){for(var r=t;r<e.length;r++)if("text"!==e[r].type)switch(e[r].text){case Ce:var a=Ne(e,r+1,[]),c=Object(s.a)(a,2),i=c[0],o=c[1];n.push(i),r=o;break;case Te:throw new we("Unexpected keyword ".concat(Te));default:n.push(e[r])}else n.push(e[r]);return n}(e,0,[])},Se=function(e,t,n,r){var a=Object.fromEntries(ye.map((function(e){return[e.keyword,e.get]})));if(a.hasOwnProperty(e.text))return a[e.text]({state:t,id:n,order:r}).toString();throw new we('Unknown keyword "'.concat(e.text,'".'))},De=function(e,t){return e.map((function(e){if(e instanceof Array)return function(e,t){return t.inProgress.map((function(n,r){return e.map((function(e){switch(e.type){case"text":return e.text;case"keyword":return Se(e,t,n,r);default:throw new we("Unexpected token type.")}})).join("")})).join("")}(e,t);switch(e.type){case"text":return e.text;case"keyword":return Se(e,t,null,null);default:throw new we("Unexpected token type.")}})).join("")},Be=function(e,t){try{var n=function(e){return Pe(e,0,[])}(e),r=Ie(n);return De(r,t)}catch(a){if(a instanceof we)return a.message;throw a}},Ee=Object(A.a)((function(e){return{card:{margin:"auto",marginTop:"2rem",marginBottom:"2rem",width:"auto",maxWidth:600}}})),Le=function(e){var t=Ee(),n=g(),a=L(),c=Be(a.template,n);return Object(p.jsxs)(Z.a,{className:t.card,children:[Object(p.jsx)(q.a,{title:"\u30ec\u30dd\u30fc\u30c8"}),Object(p.jsx)(Y.a,{children:Object(p.jsx)(z.a,{children:c.split("\n").map((function(e,t){return Object(p.jsxs)(r.Fragment,{children:[e,Object(p.jsx)("br",{})]},"report-content-".concat(t))}))})})]})},Me=function(e){return Object(p.jsxs)("main",{children:[Object(p.jsx)(Oe,{page:e.page,index:0,children:Object(p.jsx)(me,{})}),Object(p.jsx)(Oe,{page:e.page,index:1,children:Object(p.jsx)(pe,{})}),Object(p.jsx)(Oe,{page:e.page,index:2,children:Object(p.jsx)(Le,{})}),Object(p.jsx)(Oe,{page:e.page,index:3,children:Object(p.jsx)(ge,{})})]})},Re=(n(84),function(){var e=Object(r.useState)(0),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(G,{page:n,children:Object(p.jsxs)(o.a,{value:n,onChange:function(e,t){return a(t)},children:[Object(p.jsx)(u.a,{label:"in progress"}),Object(p.jsx)(u.a,{label:"done"}),Object(p.jsx)(u.a,{label:"report"}),Object(p.jsx)(u.a,{label:"config"})]})}),Object(p.jsx)(U,{children:Object(p.jsx)(S,{children:Object(p.jsx)(Me,{page:n})})})]})}),Ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,139)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};n(85);i.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(Re,{})}),document.getElementById("root")),Ue()}},[[86,1,2]]]);
//# sourceMappingURL=main.1ee32d3c.chunk.js.map